<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Java,ZooKeeper,">





  <link rel="alternate" href="/atom.xml" title="胖子的博客" type="application/atom+xml">






<meta name="description" content="大纲   本文参考或翻译自： https://dev.mysql.com/doc/refman/5.7/en/replication.html    mysql 5.7 支持多种主从复制的方法     传统方法：依赖binlog文件和文件的position保持同步 （https://dev.mysql.com/doc/refman/5.7/en/replication-configuration">
<meta name="keywords" content="Java,ZooKeeper">
<meta property="og:type" content="article">
<meta property="og:title" content="mysql 5.7 replication">
<meta property="og:url" content="https://snzhaoyua.github.io/2019/09/19/2019/20190210 mysql_5.7_replication/index.html">
<meta property="og:site_name" content="胖子的博客">
<meta property="og:description" content="大纲   本文参考或翻译自： https://dev.mysql.com/doc/refman/5.7/en/replication.html    mysql 5.7 支持多种主从复制的方法     传统方法：依赖binlog文件和文件的position保持同步 （https://dev.mysql.com/doc/refman/5.7/en/replication-configuration">
<meta property="og:locale" content="zh-Hans">
<meta property="og:updated_time" content="2019-09-19T03:41:58.622Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="mysql 5.7 replication">
<meta name="twitter:description" content="大纲   本文参考或翻译自： https://dev.mysql.com/doc/refman/5.7/en/replication.html    mysql 5.7 支持多种主从复制的方法     传统方法：依赖binlog文件和文件的position保持同步 （https://dev.mysql.com/doc/refman/5.7/en/replication-configuration">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://snzhaoyua.github.io/2019/09/19/2019/20190210 mysql_5.7_replication/">





  <title>mysql 5.7 replication | 胖子的博客</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">胖子的博客</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">zhaoyu's blog</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-sitemap">
          <a href="/sitemap.xml" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-sitemap"></i> <br>
            
            站点地图
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://snzhaoyua.github.io/2019/09/19/2019/20190210 mysql_5.7_replication/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="zhaoyu025@gmail.com">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="胖子的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">mysql 5.7 replication</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-09-19T11:41:58+08:00">
                2019-09-19
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/备忘/" itemprop="url" rel="index">
                    <span itemprop="name">备忘</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/备忘/技术/" itemprop="url" rel="index">
                    <span itemprop="name">技术</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          
            <span class="post-meta-divider">|</span>
            <span class="page-pv"><i class="fa fa-file-o"></i> 阅读次数
            <span class="busuanzi-value" id="busuanzi_value_page_pv"></span>
            </span>
          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <div class="sect1">
<h2 id="_大纲">大纲</h2>
<div class="sectionbody">
<div class="paragraph">
<p>本文参考或翻译自：
<a href="https://dev.mysql.com/doc/refman/5.7/en/replication.html" class="bare" target="_blank" rel="noopener">https://dev.mysql.com/doc/refman/5.7/en/replication.html</a></p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">mysql 5.7 支持多种主从复制的方法</dt>
<dd>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>传统方法：依赖binlog文件和文件的position保持同步
（https://dev.mysql.com/doc/refman/5.7/en/replication-configuration.html）</p>
</li>
<li>
<p>新方法： 依赖全局事务id即global transaction identifer（GTIDs）
（https://dev.mysql.com/doc/refman/5.7/en/replication-gtids.html）</p>
</li>
</ol>
</div>
</dd>
<dt class="hdlist1">replication 支持不同类型的同步</dt>
<dd>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>异步复制（asynchronous，默认）</p>
</li>
<li>
<p>同步复制（只有 NDB 集群才有的一种特性）</p>
</li>
<li>
<p>半同步复制（semisynchronous，是对异步复制的一种补充）</p>
</li>
</ol>
</div>
</dd>
</dl>
</div>
<div class="paragraph">
<p>With semisynchronous replication, a commit performed on the master blocks before returning to the session that performed the transaction until at least one slave acknowledges that it has received and logged the events for the transaction; see Semisynchronous Replication(<a href="https://dev.mysql.com/doc/refman/5.7/en/replication-semisync.html" class="bare" target="_blank" rel="noopener">https://dev.mysql.com/doc/refman/5.7/en/replication-semisync.html</a>).
	MySQL 5.7 also supports delayed replication such that a slave server deliberately lags behind the master by at least a specified amount of time; see Section 16.3.10, Delayed Replication(<a href="https://dev.mysql.com/doc/refman/5.7/en/replication-delayed.html" class="bare" target="_blank" rel="noopener">https://dev.mysql.com/doc/refman/5.7/en/replication-delayed.html</a>).</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">HOW-TO</dt>
<dd>
<p>There are a number of solutions available for setting up replication between servers, and the best method to use depends on the presence of data and the engine types you are using. For more information on the available options, see Section 16.1.2, “Setting Up Binary Log File Position Based Replication”(<a href="https://dev.mysql.com/doc/refman/5.7/en/replication-howto.html" class="bare" target="_blank" rel="noopener">https://dev.mysql.com/doc/refman/5.7/en/replication-howto.html</a>).</p>
</dd>
<dt class="hdlist1">复制格式</dt>
<dd>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>基于语句的(Statement Based Replication (SBR))</p>
</li>
<li>
<p>基于行的(Row Based Replication (RBR))</p>
</li>
<li>
<p>混合的，也就是结合以上两种(Mixed Based Replication (MBR))
<a href="https://dev.mysql.com/doc/refman/5.7/en/replication-formats.html" class="bare" target="_blank" rel="noopener">https://dev.mysql.com/doc/refman/5.7/en/replication-formats.html</a>.</p>
</li>
</ol>
</div>
</dd>
<dt class="hdlist1">选项与变量</dt>
<dd>
<p>Replication is controlled through a number of different options and variables. For more information, see Section 16.1.6, “Replication and Binary Logging Options and Variables”(<a href="https://dev.mysql.com/doc/refman/5.7/en/replication-options.html" class="bare" target="_blank" rel="noopener">https://dev.mysql.com/doc/refman/5.7/en/replication-options.html</a>).</p>
</dd>
<dt class="hdlist1">replication 的其它用途</dt>
<dd>
<p><a href="https://dev.mysql.com/doc/refman/5.7/en/replication-solutions.html" class="bare" target="_blank" rel="noopener">https://dev.mysql.com/doc/refman/5.7/en/replication-solutions.html</a></p>
</dd>
<dt class="hdlist1">原理</dt>
<dd>
<p><a href="https://dev.mysql.com/doc/refman/5.7/en/replication-implementation.html" class="bare" target="_blank" rel="noopener">https://dev.mysql.com/doc/refman/5.7/en/replication-implementation.html</a></p>
</dd>
<dt class="hdlist1">研究路线</dt>
<dd>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>配置 replication</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>基于日志位置的复制配置</p>
</li>
<li>
<p>基于GTIDs的复制</p>
</li>
<li>
<p>MySQL multi-Source replication</p>
</li>
<li>
<p>在上线机器上更改复制模式</p>
</li>
<li>
<p>复制与日志记录选项和变量</p>
</li>
<li>
<p>常用复制管理任务</p>
</li>
</ol>
</div>
</li>
<li>
<p>replication 实现</p>
</li>
<li>
<p>replication 用途
..</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>半同步</p>
</li>
</ol>
</div>
</li>
<li>
<p>replication notes and tips</p>
</li>
</ol>
</div>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_配置_replication">配置 replication</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_基于_binlog_日志文件位置_的复制">基于 BinLog 日志文件位置 的复制</h3>
<div class="paragraph">
<p>master 作为数据库改变的源头，将事件（变化、更新等操作）写入到二进制日志，事件信息存储的格式根据变化的不同而不同；slave 从主机读取并执行日志。
每台 slave 都会获取到一份二进制日志（以下简称 binlog）的完整内容的副本。slave 会决定执行这个 binlog 的哪一部分。除非特别指定，否则全部执行。如果需要，你也可以配置只执行特定 database 或者 table 的相关语句。</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p>不能配置只执行某一次特定的事件。</p>
</div>
</div>
</div>
<div class="paragraph">
<p>每台 slave 都会记录一个 binlog 的坐标：文件名称和这个文件中已经处理到什么位置。这就意味着多个 slave 可以正在执行同一个 binlog 的不同部分。因为是 slave 在控制这个过程， slave 可以随意连接、断开 master 而不影响 master 操作。而且这意味着 slave 可以断开、重连、恢复处理。</p>
</div>
<div class="paragraph">
<p>master 和每一个 slave 都必须有一个唯一的 server-id(<a href="https://dev.mysql.com/doc/refman/5.7/en/replication-options.html#option_mysqld_server-id)，并且需要通过" class="bare" target="_blank" rel="noopener">https://dev.mysql.com/doc/refman/5.7/en/replication-options.html#option_mysqld_server-id)，并且需要通过</a> CHANGE MASTER TO 语句提供 master 主机地址、日志文件名称、日志文件位置等信息(<a href="https://dev.mysql.com/doc/refman/5.7/en/change-master-to.html)。这部分细节存储在" class="bare" target="_blank" rel="noopener">https://dev.mysql.com/doc/refman/5.7/en/change-master-to.html)。这部分细节存储在</a> slave 的 master info repository， 可以是一个文件，也可能存储在一个表中(<a href="https://dev.mysql.com/doc/refman/5.7/en/slave-logs.html)。" class="bare" target="_blank" rel="noopener">https://dev.mysql.com/doc/refman/5.7/en/slave-logs.html)。</a></p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">首先，掌握一些基础命令，有助于后面的配置</dt>
</dl>
</div>
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p><strong>控制 master 的语句</strong> (SQL Statements for Controlling Master Servers)
（https://dev.mysql.com/doc/refman/5.7/en/replication-master-sql.html）</p>
</div>
<div class="listingblock">
<div class="content">
<pre>SHOW BINARY LOGS<b class="conum">(1)</b>
SHOW BINLOG EVENTS<b class="conum">(2)</b>
SHOW MASTER STATUS
SHOW SLAVE HOSTS</pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>SHOW BINARY LOGS 等同于 SHOW MASTER LOGS. 需要权限.</p>
</li>
<li>
<p>支持指定文件名、位置等，见 <a href="https://dev.mysql.com/doc/refman/5.7/en/show-binlog-events.html；" class="bare" target="_blank" rel="noopener">https://dev.mysql.com/doc/refman/5.7/en/show-binlog-events.html；</a> 大数据量耗费较多时间，可用 mysqlbinlog 工具代替，见 <a href="https://dev.mysql.com/doc/refman/5.7/en/mysqlbinlog.html" class="bare" target="_blank" rel="noopener">https://dev.mysql.com/doc/refman/5.7/en/mysqlbinlog.html</a>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>控制 slave 的语句</strong> (SQL Statements for Controlling Slave Servers)
（https://dev.mysql.com/doc/refman/5.7/en/replication-slave-sql.html）</p>
</div>
<div class="listingblock">
<div class="content">
<pre>CHANGE MASTER TO<b class="conum">(1)</b>
CHANGE REPLICATION FILTER
MASTER_POS_WAIT()
RESET SLAVE
SET GLOBAL sql_slave_skip_counter
START SLAVE
STOP SLAVE
SHOW SLAVE STATUS and SHOW RELAYLOG EVENTS</pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>内容参考 <a href="https://dev.mysql.com/doc/refman/5.7/en/change-master-to.html，关注点：" class="bare" target="_blank" rel="noopener">https://dev.mysql.com/doc/refman/5.7/en/change-master-to.html，关注点：</a></p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>是否需要先 stop slave</p>
</li>
<li>
<p>多线程的 slave 下可能出现的间隙问题（gaps）以及 <code>START SLAVE UNTIL SQL_AFTER_MTS_GAPS</code></p>
</li>
<li>
<p>CHANGE MASTER TO .. FOR CHANNEL <em>channel</em> 的用法, 更多 Replication Channel 参考 <a href="https://dev.mysql.com/doc/refman/5.7/en/replication-channels.html" class="bare" target="_blank" rel="noopener">https://dev.mysql.com/doc/refman/5.7/en/replication-channels.html</a></p>
</li>
<li>
<p>未指定的选项保留旧的值。</p>
</li>
<li>
<p>【重要】如果指定了 <code>MASTER_HOST</code> 或者 <code>MASTER_PORT</code>，即使值没有变化，mysql 也认为 master 主机也跟以前不一样了。这种情况下，binlog的文件名和位置就失效了，所以如果不指定 MASTER_LOG_FILE 和 MASTER_LOG_POS，mysql默认添加上 MASTER_LOG_FILE='' 且 MASTER_LOG_POS = 4。</p>
</li>
<li>
<p>ssl 相关的配置，MASTER_SSL_XXX 和 --ssl-XXX (<a href="https://dev.mysql.com/doc/refman/5.7/en/encrypted-connection-options.html" class="bare" target="_blank" rel="noopener">https://dev.mysql.com/doc/refman/5.7/en/encrypted-connection-options.html</a>) 功能一样。</p>
</li>
<li>
<p>心跳检测相关的选项（比如 MASTER_HEARTBEAT_PERIOD 不指定，默认是系统变量 slave_net_timeout 的一半；更改 slave_net_timeout 也要适当更改其它关联选项否则不起作用等）</p>
<div class="paragraph">
<p>更改默认值并检查当前连接心跳次数：</p>
</div>
<div class="listingblock">
<div class="content">
<pre>STOP SLAVE;
CHANGE MASTER TO MASTER_HOST='X.X.X.X', MASTER_LOG_POS=XX, MASTER_HEARTBEAT_PERIOD=10;
START SLAVE;

-- 一些常用的健康表
mysql&gt; USE performance_schema;
mysql&gt; SHOW TABLES LIKE "replication%";
+---------------------------------------------+
| Tables_in_performance_schema (replication%) |
+---------------------------------------------+
| replication_applier_configuration           |
| replication_applier_status                  |
| replication_applier_status_by_coordinator   |
| replication_applier_status_by_worker        |
| replication_connection_configuration        |
| replication_connection_status               |
| replication_group_member_stats              |
| replication_group_members                   |
+---------------------------------------------+
8 rows in set (0.00 sec)


-- 检查当前配置
SELECT * FROM performance_schema.replication_connection_configuration\G
-- 检查当前连接心跳次数、连接状态
SELECT * FROM performance_schema.replication_connection_status\G</pre>
</div>
</div>
</li>
<li>
<p>MASTER_DELAY 与 延迟复制 <a href="https://dev.mysql.com/doc/refman/5.7/en/replication-delayed.html" class="bare" target="_blank" rel="noopener">https://dev.mysql.com/doc/refman/5.7/en/replication-delayed.html</a></p>
</li>
<li>
<p>MASTER_BIND 与多网卡平面有关（可用 SHOW SLAVE STATUS 查看）</p>
</li>
<li>
<p>一些不可同时指定的值：</p>
<div class="listingblock">
<div class="content">
<pre>MASTER_LOG_FILE or MASTER_LOG_POS 与 RELAY_LOG_FILE or RELAY_LOG_POS 不可同时指定。
MASTER_LOG_FILE or MASTER_LOG_POS 与  MASTER_AUTO_POSITION = 1 不可同时指定。
MASTER_LOG_FILE or MASTER_LOG_POS 如果不指定，使用之前的旧值。</pre>
</div>
</div>
</li>
<li>
<p>【重要】relaylog 的删除</p>
<div class="paragraph">
<p>In MySQL 5.7.4 and later, relay logs are preserved if at least one of the slave SQL thread and the slave I/O thread is running; if both threads are stopped, all relay log files are deleted unless at least one of RELAY_LOG_FILE or RELAY_LOG_POS is specified.</p>
</div>
</li>
<li>
<p>MASTER_AUTO_POSITION = 1</p>
<div class="paragraph">
<p>When MASTER_AUTO_POSITION = 1 is used with CHANGE MASTER TO, the slave attempts to connect to the master using the GTID-based replication protocol. From MySQL 5.7, this option can be employed by CHANGE MASTER TO only if both the slave SQL and slave I/O threads are stopped. Both the slave and the master must have GTIDs enabled (GTID_MODE=ON, ON_PERMISSIVE, or OFF_PERMISSIVE on the slave, and GTID_MODE=ON on the master). Auto-positioning is used for the connection, so the coordinates represented by MASTER_LOG_FILE and MASTER_LOG_POS are not used, and the use of either or both of these options together with MASTER_AUTO_POSITION = 1 causes an error. If multi-source replication is enabled on the slave, you need to set the MASTER_AUTO_POSITION = 1 option for each applicable replication channel.（https://dev.mysql.com/doc/refman/5.7/en/replication-gtids-auto-positioning.html）</p>
</div>
</li>
</ol>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Replication 与 binlog 的选项、变量</strong>(Replication and Binary Logging Options and Variables)
（https://dev.mysql.com/doc/refman/5.7/en/replication-options.html）</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_基于gtids的复制">基于GTIDs的复制</h3>

</div>
<div class="sect2">
<h3 id="_mysql_multi_source_replication">MySQL multi-Source replication</h3>

</div>
<div class="sect2">
<h3 id="_在上线机器上更改复制模式">在上线机器上更改复制模式</h3>

</div>
<div class="sect2">
<h3 id="_复制与日志记录选项和变量">复制与日志记录选项和变量</h3>

</div>
<div class="sect2">
<h3 id="_常用复制管理任务">常用复制管理任务</h3>

</div>
</div>
</div>
<div class="sect1">
<h2 id="_replication_实现">replication 实现</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_replication_用途">replication 用途</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_半同步复制">半同步复制</h3>
<div class="paragraph">
<p><a href="https://dev.mysql.com/doc/refman/5.7/en/replication-semisync.html" class="bare" target="_blank" rel="noopener">https://dev.mysql.com/doc/refman/5.7/en/replication-semisync.html</a></p>
</div>
<div class="paragraph">
<p>mysql 默认是异步同步，master 把操作写到 binlog 里，但是不关心 slave 是否（或者何时）收到（或者处理）这些事件。这种方式下，master 如果崩溃，可能来不及把其已经提交的事务传输给任何一个 slave。 Consequently, failover from master to slave in this case may result in failover to a server that is missing transactions relative to the master.</p>
</div>
<div class="paragraph">
<p>半同步可以作为异步的一种替代：
1. 当 slave 连接到主机的时候，它会提示 master，自己是否支持半同步
2. 当 master 开启了半同步，并且有至少一台开启了半同步的 slave 连接到了 master，那么任何一个执行事务的线程，就会一直等待，至少一个开启了半同步的 slave 反馈其收到了这个事务相关的全部日志（或者达到一个超时时间），然后才会 commit；
3. slave 只有在收到事件、把事件写入到 relaylog 并刷到磁盘后，才会向 master 发出这个反馈；
4. 当超时时间已经达到，master 还没有收到任何反馈，其会转成异步模式；一旦任何一个 slave 赶上（步骤3完成？），master 还会继续转回半同步模式。
5. 半同步必须在 master 和 slave 同时开启，任何一方没有开启，都是异步的模式。</p>
</div>
<div class="sect3">
<h4 id="_管理界面">管理界面</h4>

</div>
<div class="sect3">
<h4 id="_安装配置">安装配置</h4>

</div>
<div class="sect3">
<h4 id="_监控">监控</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_实战">实战</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_如何在主从不同步的情况下_重新同步主从">如何在主从不同步的情况下，重新同步主从?</h3>
<div class="paragraph">
<p>在我的测试机器上面，我在多次运行测试语句后，发现主机上有从机不存在的表。现在我想重新让两者同步，怎么办？</p>
</div>
<div class="listingblock">
<div class="content">
<pre>-- master
RESET MASTER;
FLUSH TABLES WITH READ LOCK;
SHOW MASTER STATUS;

mysqldump -u root -p --all-databases &gt; /a/path/mysqldump.sql
scp /a/path/mysqldump.sql TO SLAVE /b/path/mysqldump.sql
UNLOCK TABLES;

-- slave
mysql -uroot -p &lt; mysqldump.sql

RESET SLAVE;
CHANGE MASTER TO MASTER_LOG_FILE='mysql-bin.000001', MASTER_LOG_POS=154;
START SLAVE;
SHOW SLAVE STATUS;</pre>
</div>
</div>
<div class="paragraph">
<p><a href="https://stackoverflow.com/questions/2366018/how-to-re-sync-the-mysql-db-if-master-and-slave-have-different-database-incase-o" class="bare" target="_blank" rel="noopener">https://stackoverflow.com/questions/2366018/how-to-re-sync-the-mysql-db-if-master-and-slave-have-different-database-incase-o</a>
<a href="https://dev.mysql.com/doc/refman/5.7/en/reset-master.html" class="bare" target="_blank" rel="noopener">https://dev.mysql.com/doc/refman/5.7/en/reset-master.html</a></p>
</div>
</div>
</div>
</div>
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Java/" rel="tag"># Java</a>
          
            <a href="/tags/ZooKeeper/" rel="tag"># ZooKeeper</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2019/09/19/2019/20190210 prime_number/" rel="next" title="测试驱动开发的一个示例代码——求质因数">
                <i class="fa fa-chevron-left"></i> 测试驱动开发的一个示例代码——求质因数
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2019/09/19/2019/20190210 mysql 查询锁状态常用命令/" rel="prev" title="查询锁状态常用命令">
                查询锁状态常用命令 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  
    <div class="comments" id="comments">
      <div id="lv-container" data-id="city" data-uid="MTAyMC80MDI1OS8xNjc4Ng=="></div>
    </div>

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/avatar.gif" alt="zhaoyu025@gmail.com">
            
              <p class="site-author-name" itemprop="name">zhaoyu025@gmail.com</p>
              <p class="site-description motion-element" itemprop="description">欢迎给我发邮件，我会很开心忽略你</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">58</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">5</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">47</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#_大纲"><span class="nav-number">1.</span> <span class="nav-text">大纲</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#_配置_replication"><span class="nav-number">2.</span> <span class="nav-text">配置 replication</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#_基于_binlog_日志文件位置_的复制"><span class="nav-number">2.1.</span> <span class="nav-text">基于 BinLog 日志文件位置 的复制</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#_基于gtids的复制"><span class="nav-number">2.2.</span> <span class="nav-text">基于GTIDs的复制</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#_mysql_multi_source_replication"><span class="nav-number">2.3.</span> <span class="nav-text">MySQL multi-Source replication</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#_在上线机器上更改复制模式"><span class="nav-number">2.4.</span> <span class="nav-text">在上线机器上更改复制模式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#_复制与日志记录选项和变量"><span class="nav-number">2.5.</span> <span class="nav-text">复制与日志记录选项和变量</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#_常用复制管理任务"><span class="nav-number">2.6.</span> <span class="nav-text">常用复制管理任务</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#_replication_实现"><span class="nav-number">3.</span> <span class="nav-text">replication 实现</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#_replication_用途"><span class="nav-number">4.</span> <span class="nav-text">replication 用途</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#_半同步复制"><span class="nav-number">4.1.</span> <span class="nav-text">半同步复制</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#_管理界面"><span class="nav-number">4.1.1.</span> <span class="nav-text">管理界面</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#_安装配置"><span class="nav-number">4.1.2.</span> <span class="nav-text">安装配置</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#_监控"><span class="nav-number">4.1.3.</span> <span class="nav-text">监控</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#_实战"><span class="nav-number">5.</span> <span class="nav-text">实战</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#_如何在主从不同步的情况下_重新同步主从"><span class="nav-number">5.1.</span> <span class="nav-text">如何在主从不同步的情况下，重新同步主从?</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">zhaoyu025@gmail.com</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Gemini</a> v5.1.4</div>




        
<div class="busuanzi-count">
  <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="site-uv">
      <i class="fa fa-user"></i> 访问人数
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
      
    </span>
  

  
    <span class="site-pv">
      <i class="fa fa-eye"></i> 总访问量
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
      
    </span>
  
</div>








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  
    <script type="text/javascript">
      (function(d, s) {
        var j, e = d.getElementsByTagName(s)[0];
        if (typeof LivereTower === 'function') { return; }
        j = d.createElement(s);
        j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
        j.async = true;
        e.parentNode.insertBefore(j, e);
      })(document, 'script');
    </script>
  












  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  
<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>


  
  

  
  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdn.bootcss.com/mathjax/2.7.1/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
  


  

  

</body>
</html>
